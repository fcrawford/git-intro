<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Git For Collaboration</title>
    <style>
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif);
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body {
        font-family: 'Droid Serif';
      }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: 400;
        margin-bottom: 0;
      }
      .remark-slide-content h1 { font-size: 3em; }
      .remark-slide-content h2 { font-size: 2em; }
      .remark-slide-content h3 { font-size: 1.6em; }
      .footnote {
        position: absolute;
        bottom: 3em;
      }
      li p { line-height: 1.25em; }
      .red { color: #fa0000; }
      .large { font-size: 2em; }
      a, a > code {
        color: rgb(249, 38, 114);
        text-decoration: none;
      }
      code {
        background: #e7e8e2;
        border-radius: 5px;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
      .remark-code-line-highlighted     { background-color: #373832; }
      .pull-left {
        float: left;
        width: 47%;
      }
      .pull-right {
        float: right;
        width: 47%;
      }
      .pull-right ~ p {
        clear: both;
      }
      #slideshow .slide .content code {
        font-size: 0.8em;
      }
      #slideshow .slide .content pre code {
        font-size: 0.9em;
        padding: 15px;
      }
      .inverse {
        background: #272822;
        color: #777872;
        text-shadow: 0 0 20px #333;
      }
      .inverse h1, .inverse h2 {
        color: #f3f3f3;
        line-height: 0.8em;
      }

      /* Slide-specific styling */
      #slide-inverse .footnote {
        bottom: 12px;
        left: 20px;
      }
      #slide-how .slides {
        font-size: 0.9em;
        position: absolute;
        top:  151px;
        right: 140px;
      }
      #slide-how .slides h3 {
        margin-top: 0.2em;
      }
      #slide-how .slides .first, #slide-how .slides .second {
        padding: 1px 20px;
        height: 90px;
        width: 120px;
        -moz-box-shadow: 0 0 10px #777;
        -webkit-box-shadow: 0 0 10px #777;
        box-shadow: 0 0 10px #777;
      }
      #slide-how .slides .first {
        background: #fff;
        position: absolute;
        top: 20%;
        left: 20%;
        z-index: 1;
      }
      #slide-how .slides .second {
        position: relative;
        background: #fff;
        z-index: 0;
      }

      /* Two-column layout */
      .left-column {
        color: #777;
        width: 20%;
        height: 92%;
        float: left;
      }
        .left-column h2:last-of-type, .left-column h3:last-child {
          color: #000;
        }
      .right-column {
        width: 75%;
        float: right;
        padding-top: 1em;
      }
    </style>
  </head>
  <body>
    <textarea id="source">


name: inverse
layout: true
class: center, middle, inverse

---

# Git and Github for Collaboration

### Scientific Research Skills Workshop Series

Forrest W. Crawford

.footnote[[Source](https://github.com/fcrawford/git-intro)]

---

layout: false

# Collaboration in research I

Most academic researchers use two strategies for collaboration: 

### Shared Folders (Dropbox/Box)

* Single synced shared folder 
* Previous versions named by date or stored in a sub-folder called "older versions"
* Simultaneous editing results in conflicts
* Conflicting files renamed automatically, resolved manually
* Cloud-based software keeps track of synced changes and file versions
* Restoring older versions possible 
* No automatic merging of changes
* Offline work possible

---

# Collaboration in research II

### Online real-time concurrent editing (Google Docs/Overleaf/Atom teletype)

* Single synced shared file, updated online 
* Simultaneously/concurrent editing 
* Previous versions stored online
* No versioning or branching
* Conflicts cannot arise because two people cannot be working on different versions of the same document
* Restoring older versions possible
* Offline work either impossible or difficult to merge


---

# Problems

These strategies can work well for text or rich text documents where there is a single "master" version.  

However, managing complex projects spread across many files/directories can be very difficult.  Things are worse when there are a lot of people contributing to the project.  

These approaches do not scale, and it can be very difficult to manage conflicts and multiple versions of files. 

When conflicting versions arise, or someone has introduced an error into the "master" document, it can be difficult to track down the error and fix it without destroying other changes. 

### Systems for managing collaboration

In the field of software engineering, workers have developed _social and technological solutions_ to the the problem of managing collaborative work. 

The technological aspect of this system is usually called _version control_. 

---

# Why version control? 

Version control helps teams manage and keep track of changes to documents (e.g. source code, text files) over time.

For modern collaboration and software development, it is not reasonable to block collaborators from working on the project while one person makes changes to a single file.  

It is better to let team members work in parallel and to meticulously keep track of each change, and who made that change, at each point in development of the project.  

Simultaneous editing by different people can introduce conflicts that introduce errors in the document/code, and require painstaking merging of multiple changes. 

Several version control systems have been developed:

> cvs svn bitkeeper hg git

---

# A brief history of version control

Early version control systems had a centralized repository that required people to "check out" a file that they wished to work on.  That file was "locked" and others could not edit it simultaneously.  This system was effective at avoiding conflicting file versions and permitting simultaneous editing of _different_ files, but it was limiting. 

Later systems used a distributed collaboration model that permitted branching, or having a different version of a file or repository that could be developed independently of the master version. 

---

# The rise of Git

Git was created by Linus Torvalds, the inventor of Linux, in 2005 to manage work by hundreds of developers on the Linux kernel. 

Git was designed for software development by large teams.  But it is useful for many kinds of projects.

### Big ideas 

* distributed, parallel workflow
* every contributor has a full copy of the repository and its history
* fast and scalable. 

Unfortunately Git can be difficult to learn for people unfamiliar with modern software development practices and newcomers to version control. 

---

# Git philosophy

The thing to remember is that scientific collaboration is a social act.  

A version control system does not replace planning and communication during a project. 

For academic researchers, Git+GitHub completely solves three problems, and partially solves another:
1. version control
2. offsite backup and syncing between computers
3. data/code sharing post-publication
4. communicating project needs, plans, and changes to team members

The fourth one is by far the hardest.  

---

# Github

[Github](http://github.com) is an online platform for hosting Git repositories. 

In addition to providing offsite storage for Git repositories, Github offers many additional services. 
* Access control 
* Issue tracking 
* Wikis
* Pull requests with code review and comments
* Markdown rendering
* Gists

An academic Github account with unlimited public and private repositories is free.  


---

class: center

# GitHub profile page

<img src="img/githubprofile.png" width="700px">

---

# First steps: do you have Git? 

On the UNIX command line, do this: 
```bash
git --version
```
You should see something like this: 
```bash
git version 2.15.2 (Apple Git-101.1)
```

If you do not have Git, follow these instructions: 

https://www.atlassian.com/git/tutorials/install-git

Once you have installed Git, do this setup: 
```bash
git config --global user.name "Forrest Crawford"
git config --global user.email "forrest.crawford@yale.edu"
```

---

# Graphical interface to Git

There are many GUIs for Git: https://git-scm.com/downloads/guis

The most popular ones: 
* [Github Desktop](https://desktop.github.com)
* [SourceTree](https://www.sourcetreeapp.com)
* [Atom IDE](https://ide.atom.io/)

For this tutorial, we will use Git on the command line because: 
* The commands are the same on any system
* No matter how the GUI behaves, you can always interact with Git on the command line
* Command line Git is more flexible and powerful
* GUI button names are mostly the same as Git command names
* I do not use the GUIs

---

class: center

# GitHub Desktop

<img src="img/githubdesktop.png" width="700px">

---

class: center

# SourceTree (Atlassian)

<img src="img/sourcetree.png" width="700px">

---

# Tutorial I: clone these slides 

These slides are hosted in a git repository at https://github.com/fcrawford/git-intro. Let's get the repository and inspect it. 

Make a directory
```bash
cd ~
mkdir src
cd src
```
Get the repo by "cloning" it:
```bash
git clone git@github.com:fcrawford/git-intro.git
```

Now inspect the cloned repository. 
```bash
cd git-intro
```

Look at the files in there: 
```bash
ls -la
```

---

# Tutorial I: look at the files 

You will see something like
```bash
total 48
drwxr-xr-x   7 forrestcrawford  staff    224 Sep 19 09:18 ./
drwxr-xr-x  57 forrestcrawford  staff   1824 Sep  5 20:07 ../
drwxr-xr-x  17 forrestcrawford  staff    544 Sep 19 09:14 .git/
-rw-r--r--   1 forrestcrawford  staff      5 Sep 19 09:14 .gitignore
-rw-r--r--   1 forrestcrawford  staff    225 Sep 19 09:14 README.md
-rw-r--r--   1 forrestcrawford  staff  12537 Sep 19 09:18 git-intro.html
drwxr-xr-x   5 forrestcrawford  staff    160 Sep 19 09:10 img/
```

* `README.md` is a Markdown file containing meta-information and comments
* `git-intro.html` is the html/MD file containing the slides
* `img/` is a directory containing some images used in these slides
* `.gitignore` is a file that tells Git to ignore some files
* `.git` is a hidden directory containing information for Git. 

---

# Tutorial I: inspect the history

Let's see the history of this repo
```bash
git log
```
You will see entries that look like this: 
```bash
commit 253979ebbcd61fc0d65a90e502297d661087efa3
Author: Forrest Crawford <forrest.crawford@gmail.com>
Date:   Wed Sep 5 22:28:48 2018 -0400

    more content
```
Type `q` to exit the log display. 


---

# Tutorial I: status and remote

### Status 

```bash
git status
```

### Remote hosts

```bash
git remote -v
```
and you will see
```bash
origin	git@github.com:fcrawford/git-intro.git (fetch)
origin	git@github.com:fcrawford/git-intro.git (push)
```




---

# Git commands

init
checkout
clone
add
status
commit
push 
pull
log
branch
remote

reset
rebase
blame 

.gitignore

---

# Workflows

Creating a new repo from scratch

Creating a new repo from an existing directory

Looking at the code for another project

Contributing to another project 

Collaborating on an academic project

Branch + merge

Pull requests

---

# Best practices 

Plan and communicate with your collaborators.  Who is working on what, and when? 

small, frequent commits

diffs are line-based, so make lines small. 

break up code into several files. 

Create a branch to experiment. 

communicate to manage merge conflicts

Every day, list the things you want to do, and separate them conceptually into discrete tasks.  Your goal is to make each of these separate commits.  

Don't leave uncommitted changes at the end of the day. Push everything to remote. 

Never add auxiliary files to a repo.  Use the `.gitignore` file to manage. 

---

# Using Git on your own

You may wish to use GitHub to host a private repo that you are working on alone.  For example, your CV or a project you are not ready to share yet.  

Maybe want to get the benefits of automatic versioning, offsite storage, and easy syncing between machines, but aren't ready to share with others.  






---

# Using Git with one or two others



---

# A Slack + Git workflow for collaboration 

For collaboration with me and most other academic researchers, there is a simple workflow that will work well for you.  

Write on the Slack channel what you are going to work on today. If another person is also working, say which files, and ask that they don't mess with the files you are changing. 

small commits, push often. 

after you make your last commit, summarize the changes. 

Use the README.md to keep a todo list and summarize progress.  This will become the public introduction to your project. 

---

# Contributing to an existing project


---



Consideration for Tex/LaTeX documents

break up files
small lines
never add aux, log, out, bbl, blg, pdf (unless image) to the repo.  Only what is necessary to compile. 

use a Makefile to compile 

---

Considerations for R packages

The repo is the package.  README is descriptive.  Don't commit auto-generated files. 

---

# Further resources

[Pro Git](https://git-scm.com/book/en/v2)

[Videos](https://git-scm.com/videos)

[Official tutorial](https://git-scm.com/docs/gittutorial)

[Git Immersion](http://gitimmersion.com/)

[Git Every Day](https://git-scm.com/docs/giteveryday)

[Atlassian Tutorials](https://www.atlassian.com/git)

Google your Git problems.  You are not the first one to have a Git problem. If that fails, ask someone! 


    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create();
    </script>
  </body>
</html>
